{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="/static/css/index.css">
{% endblock %}

{% block style %}
    <style>
        .sidebar-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 7px;
            background-color: royalblue;
        }
        .seo-section {
            background-color: cornflowerblue;
            border-radius: 10px;
            padding: 20px;
        }
        .box {
            position: relative;
            margin-top: 10px;
        }
        .vertical-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #ccc;
        }
        .box-text {
            max-height: 96px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .content {
            margin-left: 15px;
        }
    </style>
{% endblock %}

{% block title %}
    Home
{% endblock %}

{% block content %}
    <div class="container py-4">
        <div class="row mb-4">
            <div class="col">
                <h1>HELLO!</h1>
                <h5>I'm a Python Developer</h5>
            </div>
        </div>

        <hr>

        <div class="position-relative mb-4">
            <div class="sidebar-line"></div>
            <h2 class="ms-3 mb-0">Check SEO</h2>
        </div>

        <div class="seo-section row g-3">
            <div class="col-lg-6 col-md-6 col-12">
                <img src="/media/bg-tool.jpeg" alt="SEO Checker" class="img-fluid rounded">
            </div>
            <div class="col-lg-6 col-md-6 col-12 text-white">
                <p><b>Đưa website của bạn lên trang nhất Google với Site Checker!</b></p>
                <form method="post" class="d-flex gap-2">
                    {% csrf_token %}
                    <input type="text" name="your_domain" class="form-control" placeholder="Viết link mà bạn muốn kiểm tra SEO ở đây...">
                    <button type="submit" class="btn btn-light">
                        <i class="fa-solid fa-magnifying-glass"></i> <b>Kiểm tra</b>
                    </button>
                </form>
                <p class="mt-3">Công cụ kiểm tra nhanh SEO miễn phí của chúng tôi giúp bạn phân tích mọi yếu tố SEO quan trọng và cung cấp hướng dẫn chi tiết để cải thiện thứ hạng website của bạn. Dễ sử dụng, hoạt động hiệu quả cho mọi loại trang web và hoàn toàn miễn phí.</p>
                <p><b>Bắt đầu kiểm tra miễn phí ngay!</b></p>
            </div>
        </div>

        {% if res %}
            <ul class="list-group mt-4">
                {% for key, val in res.items %}
                    <li class="list-group-item">
                        <div class="row align-items-start">
                            <div class="col-lg-3 col-12 d-flex align-items-center gap-2">
                                {% if val.status %}
                                    <i class="fa-solid fa-check text-success"></i>
                                {% else %}
                                    <i class="fa-solid fa-circle-exclamation text-danger"></i>
                                {% endif %}
                                <b>{{ val.name }}</b>
                            </div>
                            <div class="col-lg-9 col-12">
                                {% if val.type_msg %}
                                    {% for it in val.msg %}
                                        <b>{{ it }}</b><br>
                                    {% endfor %}
                                {% else %}
                                    <b>{{ val.msg }}</b><br>
                                {% endif %}

                                {% if val.type_data == 'list' %}
                                    <div class="box">
                                        <div class="vertical-line"></div>
                                        <div class="content box-text" id="textBox-{{ key }}">
                                            {% for it in val.data %}
                                                <p class="mb-1">{{ it }}</p>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-link mt-2 p-0" onclick="toggleExpand('{{ key }}')">Expand/Collapse</button>
                                {% elif val.type_data == 'dict' %}
                                    <div class="box">
                                        <div class="vertical-line"></div>
                                        <div class="content box-text" id="textBox-{{ key }}">
                                            {% for k, v in val.data.items %}
                                                <b>{{ k }}</b>
                                                {% for it in v %}
                                                    <p class="mb-1">{{ it }}</p>
                                                {% endfor %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-link mt-2 p-0" onclick="toggleExpand('{{ key }}')">Expand/Collapse</button>
                                {% else %}
                                    <div class="box">
                                        <div class="vertical-line"></div>
                                        <div class="content">
                                            <p class="mb-1">{{ val.data }}</p>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}

        <hr>

        <div class="position-relative mb-4">
            <div class="sidebar-line"></div>
            <h2 class="ms-3 mb-0">
                <a href="{% url 'video_youtube' %}" class="text-decoration-none text-dark">CRAWL VIDEO YOUTUBE</a>
            </h2>
        </div>
        <a href="{% url 'video_youtube' %}" class="btn btn-success">Bắt đầu lấy dữ liệu</a>
    </div>
{% endblock %}